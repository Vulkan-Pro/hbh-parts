{% extends 'base.html' %}
{% load staticfiles %}


{% block content %}

{% include "includes/activate-request-modal.html" %}


{% include "includes/remove-request-modal.html" %}



<div class="account">
    <div class="container">

        <a class="btnBack text-dark" href="{% url 'mainapp:account' %}">
            <img src="{% static 'content/img/global/backArrowBlue.svg' %}" alt="backArrow"> Back
        </a>

        <div class="sectionTitle">
            <center><h3>All Requests</h3></center>
            <h5><span>User:</span> {{request.user.get_full_names}} ({{request.user.userprofile.user_type}})</h5>
            <p>Here you can track all your active and inactive requests.</p>
        </div>


        {% if all_requests.count > 0 %}
        <table class="table table-responsive-lg table-hover table-sm">
            <thead class="thead-light">
                <tr>
                    <th>Request Id</th>
                    <th>Location</th>
                    <th>Property Type</th>
                    <th>Bedrooms</th>
                    <th>Bathrooms</th>
                    <th>My Price</th>
                    <th>Matches</th>
                    <th>Action</th>
                </tr>
            </thead>


            {% for r in all_requests %}

            <tr>
                <td>
                    ##{{r.id}}
                </td>
                <td>
                    {{r.location}}
                </td>
                <td>
                    {{r.property_type}}
                </td>
                <td style="padding-left:2rem;">
                    {{r.no_of_bedrooms}}
                </td>
                <td style="padding-left:2rem;">
                    {{r.no_of_bathrooms}}
                </td>
                <td>
                    Kshs. {{r.kshs_price}}
                </td>
                <td style="padding-left:2rem;">
                    {% if r.is_active %}
                    {{r.valid_match_count}}
                    {% else %}
                    N/A
                    {% endif %}
                </td>
                <td style="padding-left:2rem;">
                    {% if r.is_active %}
                    <a class="btn-md unmatched-request-delete" data-id="{{r.id}}" data-toggle="modal" href="#myDeleteModal"><i class="far fa-trash-alt"></i></a>
                    {% else %}
                    <a class="btn-md unmatched-request-activate" data-id="{{r.id}}" data-toggle="modal" href="#myActivateModal">Activate Request</a>
                    {% endif %}
                </td>
            </tr>





            {% endfor %}
        </table>
        {% else %}
        <h1>You have no requests. <a href="{% url 'mainapp:add-listing' %}">Click here</a> to add new requests</h1>

        {% endif %}

    </div>
</div>


{% endblock content %}