{% extends 'base.html' %}
{% load staticfiles %}


{% block content %}

{% include "includes/activate-request-modal.html" %}


{% include "includes/remove-request-modal.html" %}


	
	<div style="padding:1rem;">
	

	<h2>All Requests</h2>
		<h4>User: {{request.user}}</h4>
		<h4>Type: {{request.user.userprofile.user_type}}</h4>
		<p>Here you can track all your active and inactive requests</p>


{% if all_requests.count > 0 %}
<table class="table">
		<tr>
			<th>Request Id</th>
			<th>Location</th>
			<th>Property Type</th>
			<th>Bedrooms</th>
			<th>Bathrooms</th>
			<th>My Price</th>
			<th>Matches</th>


			
		</tr>

		
			{% for r in all_requests %}
					
			<tr>
				<td>
				##{{r.id}}
				</td>
				<td>
				{{r.location}}
				</td>
				<td>
				{{r.property_type}}
				</td>
				<td style="padding-left:2.5rem;">
				{{r.no_of_bedrooms}}
				</td>
				<td style="padding-left:2.5rem;">
				{{r.no_of_bathrooms}}
				</td>
				<td>
					Kshs. {{r.kshs_price}}
				</td>
				<td style="padding-left:2rem;">
					{% if r.is_active %}
						{{r.valid_match_count}}
					{% else %}
					N/A
					{% endif %}
				</td>
				<td>
					{% if r.is_active %}
					<a class="btn unmatched-request-delete" data-id="{{r.id}}" data-toggle="modal" href="#myDeleteModal">Remove Request</a>
					{% else %}
					<a class="btn unmatched-request-activate" data-id="{{r.id}}" data-toggle="modal" href="#myActivateModal">Activate Request</a>
					{% endif %}
				</td>
			</tr>
		
		
				
			
			
		{% endfor %}
	</table>
{% else %}
<h1>You have no requests. <a href="{% url 'mainapp:add-listing' %}">Click here</a> to add new requests</h1>

{% endif %}

	</div>
	
	
{% endblock content %}